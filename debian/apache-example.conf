<VirtualHost *:80>
        ServerAdmin webmaster@example.com
        ServerName compteagglo.local

        Alias /static /var/lib/compte-agglo-montpellier/static

        <Proxy *>
            Order deny,allow
            Allow from all
        </Proxy>

        ProxyPass /static !
        ProxyPass / http://127.0.0.1:8094/
        ProxyPassReverse / http://127.0.0.1:8094/
        ProxyPreserveHost on

        LogLevel warn
        ErrorLog /var/log/apache2/compteagglo.local-error.log
        CustomLog /var/log/apache2/compteagglo.local-access.log combined
</VirtualHost>

<VirtualHost *:443>
        ServerAdmin webmaster@example.com
        ServerName compteagglo.local

        SSLEngine on
#        SSLCertificateFile  /etc/ssl/certs/ssl-cert-snakeoil.pem
#        SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key

        Alias /static /var/lib/compte-agglo-montpellier/static

        RequestHeader set X-Forwarded-SSL on
        RequestHeader set X-Forwarded-Protocol ssl
        RequestHeader set X-Forwarded-Proto https

        <Proxy *>
            Order deny,allow
            Allow from all
        </Proxy>

        ProxyPass /static !
        ProxyPass / http://127.0.0.1:8094/
        ProxyPassReverse / http://127.0.0.1:8094/
        ProxyPreserveHost on

        LogLevel warn
        ErrorLog /var/log/apache2/compteagglo.local-error.log
        CustomLog /var/log/apache2/compteagglo.local-access.log combined
</VirtualHost>

