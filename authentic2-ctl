#!/usr/bin/env python
import os
import sys

if __name__ == "__main__":
    config_file = False

    argv = sys.argv[1:]
    for arg in list(argv):
        if arg.startswith('--'):
            if arg.startswith('--config='):
                config_file = arg.split('=')[1]
                argv.pop(0)
            else:
                print >>sys.stderr, 'ERR: Unsupported flag', arg
                sys.exit(1)
        else:
            break

    if config_file:
        os.environ['DJANGO_CONFIG_FILE'] = config_file

    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "authentic2.settings")

    from django.core.management import execute_from_command_line

    execute_from_command_line(sys.argv[:1] + argv)
